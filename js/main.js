gsap.config({ trialWarn: false });
gsap.registerPlugin(MorphSVGPlugin);

const catEls = document.querySelectorAll('.cat-animated');
const pawsDuration = 0.8;

catEls.forEach((el) => {
  const catPawRightPaths = el.querySelectorAll('.cat-animated-paw-right');
  const catPawLeftPaths = el.querySelectorAll('.cat-animated-paw-left');
  const catBlanketPaths = el.querySelectorAll('.cat-animated-blanket');
  const catEyesPaths = el.querySelectorAll('.cat-animated-eye');
  const catEyesClipPaths = el.querySelectorAll('.cat-animated-eye-clip');

  const catPawRightFrames = [
    [
      'M278.17 448.85C276.96 460.54 269.84 470.2 260.73 472.71C247.97 476.23 231.03 465.78 228.14 447.06C235.08 440.818 244.173 437.516 253.501 437.85C262.83 438.184 271.664 442.128 278.14 448.85H278.17Z',
      'M277.6 413.9C277.09 404.68 275.6 393.56 272.6 371.32C272.2 368.38 271.6 364.43 270.74 359.32C270.12 355.75 269.22 351.25 267.55 344.26C267.47 343.94 267.4 343.62 267.32 343.26H267.18C264.206 343.719 261.319 344.629 258.62 345.96C256.058 347.098 253.438 348.1 250.77 348.96C241.23 351.96 231.01 353.41 222.65 359.28C219.25 361.67 215.85 364.93 214.5 368.96C213.476 371.932 213.134 375.097 213.5 378.22C213.542 378.271 213.576 378.328 213.6 378.39C214.384 381.131 214.906 383.94 215.16 386.78C215.537 389.651 216.092 392.497 216.82 395.3C218.15 400.62 219.3 406.05 220.22 411.46C221.1 416.62 221.67 421.83 222.58 426.99C223.023 429.574 223.597 432.134 224.3 434.66C224.9 436.8 225.71 438.88 226.3 441.01C227.22 444.18 228 447.79 229.97 450.54C233.092 447.486 236.796 445.089 240.861 443.493C244.927 441.896 249.272 441.132 253.638 441.246C258.004 441.36 262.303 442.349 266.28 444.155C270.257 445.961 273.831 448.547 276.79 451.76C277.997 439.178 278.268 426.523 277.6 413.9V413.9Z',
      'M214.35 385.06C215.229 394.791 216.722 404.457 218.82 414C219.45 416.87 223.82 441.39 232.6 458.81C234.397 462.588 237.047 465.898 240.34 468.48C243.86 471.253 248.086 472.985 252.54 473.48C253.41 473.57 264.17 474.48 271.43 466.81C275.08 462.96 276.11 458.81 277.33 453.52C278.87 446.91 278.79 442.18 278.09 427.7C277.46 414.88 277.44 412.1 277.24 409C277.24 409 276.97 404.86 276.38 399.78C275.63 393.23 271.85 372.25 265.71 344.01',
      'M266.25 469.94L261.81 453.94',
      'M251.68 472.5L252.52 458.42',
    ],
    Array.from(catPawRightPaths).map((path) => path.getAttribute('d')),
  ];

  const catPawLeftFrames = [
    [
      'M294.18 446.81C294.267 450.947 294.827 455.06 295.85 459.07C297.37 465.02 298.34 468.83 301.8 471.53C305.46 474.39 309.8 474.36 312.23 474.35C317.902 474.216 323.315 471.949 327.39 468C329.866 465.404 331.719 462.278 332.81 458.86C334.129 455.286 334.773 451.499 334.71 447.69C328.632 443.98 321.681 441.945 314.562 441.792C307.443 441.64 300.411 443.374 294.18 446.82V446.81Z',
      'M346.24 399.06C342.36 417.25 338.12 434.64 333.64 451.21C328.608 446.887 322.268 444.382 315.64 444.1C307.879 443.935 300.355 446.776 294.64 452.03C289.955 414.846 290.389 377.196 295.93 340.13C302.382 329.182 312.139 320.562 323.798 315.507C335.458 310.453 348.419 309.225 360.82 312C357.48 339.27 352.78 368.4 346.24 399.06Z',
      'M361.29 308.76C357.22 343.67 352.71 368.46 349.57 383.83C347.57 393.59 347.29 393.71 344.37 407.95C344.22 408.67 340.37 427.6 334.37 450.32C331.37 461.76 328.99 469.68 322.37 472.68C318.47 474.45 313.37 474.37 312.77 474.36C310.42 474.31 304.92 474.18 300.93 470.88C297.62 468.13 296.72 464.33 295.53 457.22C293.43 444.66 292.53 434.89 292.43 432.6C291.89 422.6 291.27 415.66 291.27 405.77C291.27 404.22 291.27 401.35 291.36 398.47C291.36 398.47 291.47 391.64 291.71 384.47C291.95 377.3 292.79 359.82 294.43 336.75',
      'M307.13 472.68C308.22 465.1 308.88 460.48 309.13 458.77',
      'M320.149 459.58L321.709 473.36',
    ],
    Array.from(catPawLeftPaths).map((path) => path.getAttribute('d')),
  ];

  const catBlanketFrames = [
    [
      'M24.1299 481.73C34.0032 480.397 43.8932 479.26 53.7999 478.32C63.7099 477.32 73.6199 476.42 83.5499 475.66C103.41 474.147 123.31 473.223 143.25 472.89C148.25 472.89 153.25 472.8 158.25 472.89C163.25 472.98 168.25 473.06 173.2 473.24C183.2 473.59 193.11 474.08 203.06 474.8C213.01 475.52 223 476.51 232.78 478C242.56 479.49 252.32 478.37 262.24 477.48C264.88 477.26 267.44 477.48 269.85 477.48C272.267 477.523 274.683 477.386 277.08 477.07C279.634 476.725 282.216 476.625 284.79 476.77C289.853 477.139 294.873 477.959 299.79 479.22C302.25 479.87 304.66 480.74 306.96 481.45C311.52 482.872 316.371 483.089 321.04 482.08C325.782 481 330.357 479.285 334.64 476.98C335.75 476.43 336.85 475.86 338.07 475.33C339.263 474.828 340.481 474.387 341.72 474.01C344.163 473.298 346.647 472.74 349.16 472.34C359.16 470.74 369.16 470.44 379.08 470.1C389 469.76 398.99 469.63 408.94 469.46C418.89 469.29 428.87 469.34 438.83 469.64C448.79 469.94 458.74 470.53 468.67 471.31C478.6 472.09 488.51 473.09 498.38 474.31C478.56 472.47 458.69 471.26 438.8 471.08C418.93 470.74 399.04 471.61 379.16 472.37C374.16 472.59 369.24 472.85 364.3 473.22C359.36 473.59 354.43 474.04 349.59 474.86C347.189 475.258 344.814 475.802 342.48 476.49C341.34 476.843 340.218 477.254 339.12 477.72C338.06 478.19 336.95 478.77 335.83 479.33C331.346 481.763 326.552 483.576 321.58 484.72C316.468 485.836 311.156 485.622 306.15 484.1C303.7 483.35 301.42 482.53 299.06 481.92C296.701 481.306 294.311 480.818 291.9 480.46C287.139 479.539 282.264 479.367 277.45 479.95C274.915 480.297 272.358 480.454 269.8 480.42C267.24 480.42 264.8 480.2 262.49 480.42C257.54 480.85 252.55 481.29 247.49 481.48C242.432 481.707 237.365 481.472 232.35 480.78C222.5 479.23 212.68 478.2 202.77 477.43C182.96 475.92 163.08 475.19 143.22 475.11C123.36 475.03 103.46 475.84 83.5999 477.04C63.7399 478.24 43.9999 479.82 24.1299 481.73Z',
    ],
    Array.from(catBlanketPaths).map((path) => path.getAttribute('d')),
    [
      'M24.1299 481.73C34.0099 480.397 43.9066 479.26 53.8199 478.32C63.7399 477.32 73.6599 476.41 83.5999 475.65C103.48 474.15 123.397 473.23 143.35 472.89C148.35 472.89 153.35 472.8 158.35 472.89C163.35 472.98 168.35 473.07 173.35 473.23C183.35 473.52 193.26 473.8 203.24 474.23C208.24 474.48 213.24 474.76 218.24 475.23C220.74 475.48 223.24 475.79 225.76 476.23C227.02 476.47 228.28 476.74 229.54 477.11C230.16 477.29 230.8 477.51 231.42 477.75L233.18 478.47C237.621 480.519 242.254 482.127 247.01 483.27C251.634 484.371 256.468 484.212 261.01 482.81C263.286 481.923 265.515 480.922 267.69 479.81C270.053 478.714 272.537 477.899 275.09 477.38C277.637 476.87 280.232 476.632 282.83 476.67C285.378 476.74 287.919 476.964 290.44 477.34L297.83 478.29C300.29 478.59 302.74 478.88 305.15 478.98C307.56 479.08 310.01 478.92 312.5 478.82C314.99 478.72 317.45 478.59 319.91 478.4C324.822 478.023 329.703 477.315 334.52 476.28C336.92 475.78 339.38 475.21 341.84 474.74C344.3 474.27 346.78 473.83 349.25 473.46C359 472 369 471.18 379 470.6C398.93 469.47 418.88 469.11 438.82 469.69C448.82 470.03 458.773 470.587 468.68 471.36C478.587 472.133 488.5 473.133 498.42 474.36C458.774 470.545 418.879 470.046 379.15 472.87C374.203 473.223 369.257 473.667 364.31 474.2C359.38 474.72 354.45 475.32 349.57 476.1C347.12 476.48 344.69 476.92 342.26 477.4C339.83 477.88 337.44 478.4 334.97 478.97C330.037 480.065 325.036 480.82 320 481.23C317.49 481.44 315 481.58 312.5 481.7C310 481.82 307.5 481.98 304.92 481.89C302.34 481.8 299.84 481.51 297.36 481.22L289.93 480.3C287.522 479.946 285.094 479.742 282.66 479.69C280.272 479.661 277.889 479.889 275.55 480.37C273.214 480.851 270.945 481.61 268.79 482.63C266.516 483.79 264.179 484.822 261.79 485.72C256.749 487.265 251.386 487.431 246.26 486.2C241.326 485.012 236.523 483.337 231.92 481.2L230.22 480.49C229.69 480.28 229.14 480.09 228.58 479.93C227.45 479.59 226.27 479.32 225.09 479.09C222.7 478.64 220.26 478.33 217.81 478.09C213 477.54 208 477.24 203 477C193.07 476.49 183.12 476.16 173.17 475.82C163.22 475.48 153.29 475.25 143.34 475.21C123.44 475.21 103.54 475.94 83.6699 477.13C63.7999 478.32 43.9999 479.82 24.1299 481.73Z',
    ],
    Array.from(catBlanketPaths).map((path) => path.getAttribute('d')),
  ];

  const catEyesFrames = [
    [
      'M260.78 180C260.78 193.93 251.41 205.22 239.84 205.22C228.27 205.22 218.9 193.9 218.9 180C218.9 178.94 219.22 177 219.53 176.95C220.19 176.95 218.95 185.65 222.72 192.8C225.67 198.4 232.72 204.93 240.99 204.25C250.09 203.5 255.19 194.57 255.99 193.2C260.26 185.74 259.57 176.9 260.27 176.95C260.59 176.94 260.78 178.89 260.78 180Z',
      'M332 178.1C332 192.03 322.62 203.32 311.06 203.32C299.5 203.32 290.13 192 290.13 178.1C290.13 177.04 290.45 175.1 290.76 175.1C291.42 175.1 290.17 183.8 293.94 190.95C296.89 196.55 303.94 203.07 312.22 202.39C321.31 201.65 326.42 192.72 327.22 191.39C331.49 183.92 330.8 175.09 331.51 175.13C331.82 175.07 332 177 332 178.1Z',
    ],
    Array.from(catEyesPaths).map((path) => path.getAttribute('d')),
  ];

  const tl = gsap.timeline({
    ease: 'power1.inOut',
    repeat: -1,
  });

  catPawRightFrames.forEach((frame) => {
    catPawRightPaths.forEach((path, pathIndex) => {
      tl.to(path, {
        morphSVG: frame[pathIndex],
        duration: pawsDuration,
      }, pathIndex ? `-=${pawsDuration}` : null);
    });
  });

  catPawLeftFrames.forEach((frame) => {
    catPawLeftPaths.forEach((path, pathIndex) => {
      tl.to(path, {
        morphSVG: frame[pathIndex],
        duration: pawsDuration,
      }, pathIndex ? `-=${pawsDuration}` : null);
    });
  });

  catBlanketFrames.forEach((frame, frameIndex) => {
    catBlanketPaths.forEach((path, pathIndex) => {
      tl.to(path, {
        morphSVG: frame[pathIndex],
        duration: pawsDuration,
      }, frameIndex * pawsDuration);
    });
  });

  const tl2 = gsap.timeline({
    ease: 'power1.inOut',
    repeat: -1,
  });

  catEyesFrames.forEach((frame, frameIndex) => {
    catEyesPaths.forEach((path, pathIndex) => {
      tl2.to([path, catEyesClipPaths[pathIndex]], {
        morphSVG: frame[pathIndex],
        duration: 0.5,
      }, frameIndex === 0 ? 3 : 3.5);
    });
  });
});
